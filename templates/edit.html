{% extends "base.html" %}

{% block title %}Editar Mangá{% endblock %}

{% block content %}
    <h2>Editar Mangá</h2>
    <form method="POST" id="editMangaForm" enctype="multipart/form-data">
        <div class="form-group">
            <label for="id">ID do Mangá</label>
            <input type="text" class="form-control" id="id" name="id" value="{{ manga.id }}" readonly>
        </div>
        <div class="form-group">
            <label for="nome">Nome do Mangá</label>
            <input type="text" class="form-control" id="nome" name="nome" value="{{ manga.nome }}" required>
        </div>
        <div class="form-group">
            <label for="descricao">Descrição</label>
            <textarea class="form-control" id="descricao" name="descricao" rows="4">{{ manga.descricao }}</textarea>
        </div>
        <div class="form-group">
            <label for="categoria">Categoria</label>
            <input type="text" class="form-control" id="categoria" name="categoria" value="{{ categorias }}" data-role="tagsinput">
        </div>
        <div class="form-group">
            <label for="ano_lancamento">Ano de Lançamento</label>
            <input type="text" class="form-control" id="ano_lancamento" name="ano_lancamento" value="{{ manga.ano_lancamento }}">
        </div>
        <div class="form-group">
            <label for="nota">Nota</label>
            <input type="text" class="form-control" id="nota" name="nota" value="{{ manga.nota }}">
        </div>
        <div class="form-group">
            <label for="url_base">URL Base</label>
            <input type="text" class="form-control" id="url_base" name="url_base" value="{{ manga.url_base }}" required>
        </div>
        <div class="form-group">
            <label for="capa">Imagem de Capa</label>
            <input type="file" class="form-control" id="capa" name="capa" accept="image/*" style="border: none; background-color: transparent;">
        </div>
        <button type="submit" class="btn btn-primary">Salvar Alterações</button>
        <div id="loadingSpinner" class="spinner-border text-primary" role="status" style="display: none;">
            <span class="sr-only">Loading...</span>
        </div>
    </form>
{% endblock %}

{% block scripts %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-tagsinput/0.8.0/bootstrap-tagsinput.min.js"></script>
    <script>
        document.getElementById('editMangaForm').addEventListener('submit', function() {
            document.getElementById('loadingSpinner').style.display = 'inline-block';
        });

    </script>
{% endblock %}
